import React, { useState } from 'react';import { useAuth } from '../firebase/AuthContext';export default function RoleSelectionDebug() {  const { user, userProfile, updateUserProfile, login, logout } = useAuth();  const [loading, setLoading] = useState(false);    const resetUserRole = async () => {    if (!user) return;        // Reset user to require role selection    await updateUserProfile({      accountType: null,      isNewUser: true    });        window.location.reload();  };  const quickLogin = async (email, password, role) => {    setLoading(true);    try {      if (user) {        await logout();        // Small delay to ensure logout completes        await new Promise(resolve => setTimeout(resolve, 1000));      }            const result = await login(email, password);      if (result.success) {        console.log(`Logged in as ${role}`);        window.location.reload();      } else {        alert(`Login failed: ${result.error}`);      }    } catch (error) {      console.error('Quick login error:', error);      alert('Login failed. Please try again.');    } finally {      setLoading(false);    }  };  return (    <div style={{ padding: '2rem', maxWidth: '600px', margin: '0 auto' }}>      <h1>🧪 Role Selection Debug</h1>            <div style={{ marginBottom: '2rem' }}>        <h3>🚀 Quick Login (Test Users):</h3>        <div style={{ display: 'flex', gap: '1rem', marginBottom: '1rem' }}>          <button             onClick={() => quickLogin('teacher@testapp.com', 'password123', 'Teacher')}            disabled={loading}            style={{              background: '#28a745',              color: 'white',              border: 'none',              padding: '0.75rem 1.5rem',              borderRadius: '6px',              cursor: loading ? 'not-allowed' : 'pointer',              opacity: loading ? 0.6 : 1            }}          >            👨‍🏫 Login as Teacher          </button>                    <button             onClick={() => quickLogin('student@testapp.com', 'password123', 'Student')}            disabled={loading}            style={{              background: '#007bff',              color: 'white',              border: 'none',              padding: '0.75rem 1.5rem',              borderRadius: '6px',              cursor: loading ? 'not-allowed' : 'pointer',              opacity: loading ? 0.6 : 1            }}          >            🎓 Login as Student          </button>        </div>        <p style={{ fontSize: '0.9rem', color: '#666' }}>          Pre-configured test users with proper roles. Click to quickly switch between teacher and student modes.        </p>      </div>            <div style={{ background: '#f8f9fa', padding: '1.5rem', borderRadius: '8px', marginBottom: '2rem' }}>        <h3>Current User State:</h3>        <p><strong>Logged In:</strong> {user ? 'Yes' : 'No'}</p>        {user && (          <>            <p><strong>Email:</strong> {user.email}</p>            <p><strong>Account Type:</strong> {userProfile?.accountType || 'Not Set'}</p>            <p><strong>Is New User:</strong> {userProfile?.isNewUser ? 'Yes' : 'No'}</p>            <p><strong>Should Show Role Selection:</strong> {              user && userProfile && userProfile.isNewUser && !userProfile.accountType ? 'Yes' : 'No'            }</p>          </>        )}      </div>      {user ? (        <div>          <h3>Test Role Selection Flow:</h3>          <button             onClick={resetUserRole}            style={{              background: '#007bff',              color: 'white',              border: 'none',              padding: '0.75rem 1.5rem',              borderRadius: '6px',              cursor: 'pointer',              marginRight: '1rem'            }}          >            🔄 Reset Role (Trigger Role Selection)          </button>                    <p style={{ fontSize: '0.9rem', color: '#666', marginTop: '1rem' }}>            Click the button above to reset your role and trigger the role selection modal.          </p>        </div>      ) : (        <div>          <p>Please log in first to test role selection.</p>          <button             onClick={() => window.location.href = '/'}            style={{              background: '#28a745',              color: 'white',              border: 'none',              padding: '0.75rem 1.5rem',              borderRadius: '6px',              cursor: 'pointer'            }}          >            Go to Landing Page          </button>        </div>      )}            <div style={{ marginTop: '2rem', padding: '1rem', background: '#fff3cd', borderRadius: '6px' }}>        <h4>🔍 How Role Selection Works:</h4>        <ol>          <li>User creates a new account</li>          <li>User profile is created with <code>isNewUser: true</code> and <code>accountType: null</code></li>          <li>App detects this state and shows RoleSelection modal</li>          <li>User chooses Teacher or Student</li>          <li>Profile is updated with chosen role and <code>isNewUser: false</code></li>          <li>User sees role-appropriate interface</li>        </ol>      </div>            <div style={{ marginTop: '2rem', padding: '1rem', background: '#d1ecf1', borderRadius: '6px' }}>
        <h4>📋 Test User Credentials:</h4>
        <p><strong>Teacher:</strong> teacher@testapp.com / password123</p>
        <p><strong>Student:</strong> student@testapp.com / password123</p>
        <p><em>Both users are pre-configured with their roles and ready to use!</em></p>
      </div>
    </div>
  );
}
